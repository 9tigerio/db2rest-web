---
sidebar_position: 1
title: Connect Multiple Databases
description: Tutorial on how to connect a DB2Rest instance to multiple physical database.
# image: ./assets/run-with-cockroachdb.png
keywords:
  - multi-db
  - rest api
  - database

---

import siteConfig from '/docusaurus.config.js';
import CodeBlock from '@theme/CodeBlock';

# Connect Multiple Databases

One of the super features of DB2Rest is that one single instance can work with multiple separate databases. For example
a DB2Rest node can connect to a MySQL and PostgreSQL database.

## Use Environment Variables

The first method to connect DB2Rest with multiple databases is similar to running with one database as described in the [getting started](../intro) section.
The multiple database configuration can be set as environment variables.

:::tip

The environment variable `SPRING_APPLICATION_JSON` property combines database configurations and must be provided as a **JSON format in a single line**.

:::

### Set environment variable

```bash
$ export SPRING_APPLICATION_JSON='{"app":{"databases":[{"id":"DB1","type":"POSTGRESQL","url":"jdbc:postgresql://localhost:5432/homidb","username":"root","password":"@Kolkata007"},{"id":"DB2","type":"MYSQL","url":"jdbc:mysql://localhost:3306/sakila","username":"root","password":"@Kolkata007"}]}}'
```

### Run the command

<CodeBlock language="jsx">$ java -jar {siteConfig.customFields.download_jar}</CodeBlock>


The JSON structure for the environment variable `SPRING_APPLICATION_JSON` is shown below.

```json lines

{
  "app": {
    "databases": [
      {
        "id": "DB1",
        "type": "POSTGRESQL",
        "url": "jdbc:postgresql://localhost:5432/homidb",
        "username": "root",
        "password": "@Kolkata007"
      },
      {
        "id": "DB2",
        "type": "MYSQL",
        "url": "jdbc:mysql://localhost:3306/sakila",
        "username": "root",
        "password": "@Kolkata007"
      }
    ]
  }
}

```

## Use Configuration File

In this method the configuration will be loaded from YAML file.

### Create Yaml file

Create a Yaml file with name format `application-{profile}.yml` - for example `application-local.yml` file as shown below. In this case, the
profile name is `local`. In this way you can create profile files for `dev`, `prod` etc.

```yaml

app:
  databases:
    - id: DB1
      type: POSTGRESQL
      url: jdbc:postgresql://localhost:5432/homidb
      username: root
      password: "@Kolkata84"

    - id: DB2
      type: MYSQL
      url: jdbc:mysql://localhost:3306/sakila
      username: root
      password: "@Kolkata84"

```

:::tip

The `application-{profile}.yml` file must be saved (in the same folder) along with the jar distribution of DB2REST.
:::

### Run the command

<CodeBlock language="jsx">$ java -jar {siteConfig.customFields.download_jar}</CodeBlock>
